# 开发进度记录

## v1.0 - 基础功能 ✅
**完成时间**: 2025-12-13

- Bitget API 对接 (持仓 + 历史)
- 飞书多维表格 API 对接
- 基础轮询同步逻辑
- 状态持久化 (state.json)

---

## v2.0 - 智能日志模式 ✅
**完成时间**: 2025-12-14

- 事件驱动更新 (仅开仓/平仓/DCA 时写入)
- 本地缓存 (减少 99% API 调用)
- Docker 容器化部署
- 日志按天轮转 (保留 7 天)

---

## v3.0 - 多交易所支持 ✅ (已禁用)
**完成时间**: 2025-12-17

- Binance API 对接 (已实现但暂时禁用)
- 批量缓存初始化 (解决 N+1 问题)
- 深度历史同步 (30 天)

---

## v4.0 - Bitget 稳定版 ✅
**完成时间**: 2025-12-18

- 禁用 Binance, 专注 Bitget 稳定性
- ROE 计算修复 (使用缓存杠杆)
- VPS 部署优化 (Bridge + DNS)

---

## v4.5 - 严格模式 ✅
**完成时间**: 2025-12-20

- 手续费计算 (openFee + closeFee + funding)
- 净收益计算 (PnL - Fees)
- 严格模式 (跳过无杠杆历史)

---

## v4.6 - 智能关联 ✅
**完成时间**: 2025-12-21

- 3 秒安全窗口: 修复 ID 漂移问题
- 防止错误关联不同交易

---

## v4.7 - 不碰原则 ✅
**完成时间**: 2025-12-21

- 杠杆/ROE 保护: 未知时留空, 不乱填
- 只更新事实数据 (状态/价格/PnL)

---

## v4.8 - 干净重构 ✅
**完成时间**: 2025-12-21

- 历史记录**只更新, 不创建**
- 删除"补录历史"功能
- 代码清理: 378 行 → 319 行
- 移除冗余注释和未使用的 Binance 逻辑