services:
  trade-sync:
    # 从上级目录构建镜像
    build:
      context: ..
      dockerfile: docker/Dockerfile
    
    # 容器名称
    container_name: bitget-feishu-sync
    
    # 自动重启策略
    restart: always
    
    # 挂载卷
    volumes:
      # 持久化状态文件（从零开始时无需预先创建）
      - ./data/state.json:/app/state.json
      # 持久化日志目录
      - ./data/logs:/app/logs
    
    # 从 .env 文件读取环境变量
    env_file:
      - config.env
    
    # 额外环境变量
    environment:
      - PYTHONUNBUFFERED=1
      - TZ=Asia/Shanghai
    
    # 日志配置
    logging:
      driver: "json-file"
      options:
        max-size: "10m"
        max-file: "3"
